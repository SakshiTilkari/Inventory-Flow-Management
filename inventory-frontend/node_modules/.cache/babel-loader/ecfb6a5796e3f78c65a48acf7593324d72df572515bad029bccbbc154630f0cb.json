{"ast":null,"code":"import{createContext,useContext,useState,useEffect}from'react';import{useNavigate}from'react-router-dom';import{login as authLogin,logout as authLogout}from'../services/auth';import{jsx as _jsx}from\"react/jsx-runtime\";const AuthContext=/*#__PURE__*/createContext();export const AuthProvider=_ref=>{let{children}=_ref;const[user,setUser]=useState(null);const[token,setToken]=useState(localStorage.getItem('token'));const navigate=useNavigate();useEffect(()=>{if(token){// You might want to verify token here or fetch user details\nconst userData=JSON.parse(localStorage.getItem('user'));setUser(userData);}},[token]);const login=async credentials=>{try{const{user,token}=await authLogin(credentials);setUser(user);setToken(token);localStorage.setItem('token',token);localStorage.setItem('user',JSON.stringify(user));navigate('/dashboard');}catch(error){throw error;}};const logout=()=>{authLogout();setUser(null);setToken(null);localStorage.removeItem('token');localStorage.removeItem('user');navigate('/login');};return/*#__PURE__*/_jsx(AuthContext.Provider,{value:{user,token,login,logout},children:children});};export const useAuth=()=>useContext(AuthContext);","map":{"version":3,"names":["createContext","useContext","useState","useEffect","useNavigate","login","authLogin","logout","authLogout","jsx","_jsx","AuthContext","AuthProvider","_ref","children","user","setUser","token","setToken","localStorage","getItem","navigate","userData","JSON","parse","credentials","setItem","stringify","error","removeItem","Provider","value","useAuth"],"sources":["C:/Users/Credoit_04/Desktop/Inventory Management/inventory-frontend/src/context/AuthContext.jsx"],"sourcesContent":["import { createContext, useContext, useState, useEffect } from 'react';\r\nimport { useNavigate } from 'react-router-dom';\r\nimport { login as authLogin, logout as authLogout } from '../services/auth';\r\n\r\nconst AuthContext = createContext();\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null);\r\n  const [token, setToken] = useState(localStorage.getItem('token'));\r\n  const navigate = useNavigate();\r\n\r\n  useEffect(() => {\r\n    if (token) {\r\n      // You might want to verify token here or fetch user details\r\n      const userData = JSON.parse(localStorage.getItem('user'));\r\n      setUser(userData);\r\n    }\r\n  }, [token]);\r\n\r\n  const login = async (credentials) => {\r\n    try {\r\n      const { user, token } = await authLogin(credentials);\r\n      setUser(user);\r\n      setToken(token);\r\n      localStorage.setItem('token', token);\r\n      localStorage.setItem('user', JSON.stringify(user));\r\n      navigate('/dashboard');\r\n    } catch (error) {\r\n      throw error;\r\n    }\r\n  };\r\n\r\n  const logout = () => {\r\n    authLogout();\r\n    setUser(null);\r\n    setToken(null);\r\n    localStorage.removeItem('token');\r\n    localStorage.removeItem('user');\r\n    navigate('/login');\r\n  };\r\n\r\n  return (\r\n    <AuthContext.Provider value={{ user, token, login, logout }}>\r\n      {children}\r\n    </AuthContext.Provider>\r\n  );\r\n};\r\n\r\nexport const useAuth = () => useContext(AuthContext);"],"mappings":"AAAA,OAASA,aAAa,CAAEC,UAAU,CAAEC,QAAQ,CAAEC,SAAS,KAAQ,OAAO,CACtE,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,KAAK,GAAI,CAAAC,SAAS,CAAEC,MAAM,GAAI,CAAAC,UAAU,KAAQ,kBAAkB,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAE5E,KAAM,CAAAC,WAAW,cAAGX,aAAa,CAAC,CAAC,CAEnC,MAAO,MAAM,CAAAY,YAAY,CAAGC,IAAA,EAAkB,IAAjB,CAAEC,QAAS,CAAC,CAAAD,IAAA,CACvC,KAAM,CAACE,IAAI,CAAEC,OAAO,CAAC,CAAGd,QAAQ,CAAC,IAAI,CAAC,CACtC,KAAM,CAACe,KAAK,CAAEC,QAAQ,CAAC,CAAGhB,QAAQ,CAACiB,YAAY,CAACC,OAAO,CAAC,OAAO,CAAC,CAAC,CACjE,KAAM,CAAAC,QAAQ,CAAGjB,WAAW,CAAC,CAAC,CAE9BD,SAAS,CAAC,IAAM,CACd,GAAIc,KAAK,CAAE,CACT;AACA,KAAM,CAAAK,QAAQ,CAAGC,IAAI,CAACC,KAAK,CAACL,YAAY,CAACC,OAAO,CAAC,MAAM,CAAC,CAAC,CACzDJ,OAAO,CAACM,QAAQ,CAAC,CACnB,CACF,CAAC,CAAE,CAACL,KAAK,CAAC,CAAC,CAEX,KAAM,CAAAZ,KAAK,CAAG,KAAO,CAAAoB,WAAW,EAAK,CACnC,GAAI,CACF,KAAM,CAAEV,IAAI,CAAEE,KAAM,CAAC,CAAG,KAAM,CAAAX,SAAS,CAACmB,WAAW,CAAC,CACpDT,OAAO,CAACD,IAAI,CAAC,CACbG,QAAQ,CAACD,KAAK,CAAC,CACfE,YAAY,CAACO,OAAO,CAAC,OAAO,CAAET,KAAK,CAAC,CACpCE,YAAY,CAACO,OAAO,CAAC,MAAM,CAAEH,IAAI,CAACI,SAAS,CAACZ,IAAI,CAAC,CAAC,CAClDM,QAAQ,CAAC,YAAY,CAAC,CACxB,CAAE,MAAOO,KAAK,CAAE,CACd,KAAM,CAAAA,KAAK,CACb,CACF,CAAC,CAED,KAAM,CAAArB,MAAM,CAAGA,CAAA,GAAM,CACnBC,UAAU,CAAC,CAAC,CACZQ,OAAO,CAAC,IAAI,CAAC,CACbE,QAAQ,CAAC,IAAI,CAAC,CACdC,YAAY,CAACU,UAAU,CAAC,OAAO,CAAC,CAChCV,YAAY,CAACU,UAAU,CAAC,MAAM,CAAC,CAC/BR,QAAQ,CAAC,QAAQ,CAAC,CACpB,CAAC,CAED,mBACEX,IAAA,CAACC,WAAW,CAACmB,QAAQ,EAACC,KAAK,CAAE,CAAEhB,IAAI,CAAEE,KAAK,CAAEZ,KAAK,CAAEE,MAAO,CAAE,CAAAO,QAAA,CACzDA,QAAQ,CACW,CAAC,CAE3B,CAAC,CAED,MAAO,MAAM,CAAAkB,OAAO,CAAGA,CAAA,GAAM/B,UAAU,CAACU,WAAW,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}